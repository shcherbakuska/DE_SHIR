# DE_SHIR
**_Автор_:** Щерба Анна Андреевна

_**Задача:**_ реализовать ETL пайплайн (в данном случае приложение на Python), которое загружает исходные данные прогнозов погоды, трансформирует их, а затем выгружает; для получения данных будет использован https://open-meteo.com/

_**Реализация решения:**_  данное ETL-приложение запускается через docker контейнер с помощью команды `docker-compose up -d`. Касаемо функциональной части, приложение  может выполнять выгрузку данных в двух разных вариациях: через API запрос, принимая в качестве входных данных временной интервал (дата начала и дата конца в виде YYYY-MM-DD), по которому будет осуществлена выгрузка; через json-файл, заранее сохраненный в контейнер по пути /app/data/ Также приложение трансформирует собранные данные и кроме обработки основных показателей погоды по интересующему временному промежутку (приведение к необходимым единицам измерения) агрегирует данные и выводит среднее значение показателей за 24 часа, а также за световой день. В конечном итоге приложение может загружать результатирующий набор данных в файл формата .csv или в поднятую через контейнер базу данных PostgreSQL. Для того чтобы ознакомиться со списком команд для выполнения приложением своего функционала, достаточно после запуска контейнера ввести команду `docker-compose run etl_app` (поднимает одноразовый контейнер на основе заданного сервиса и выполняет в нем указанную после команду)

_**Тестирование приложения:**_ обзор выполненнных тестов по проверке работы основных функций разработанного приложения представлен в файле testing.pdf

_**Пояснение решений:**_ в качестве базы данных для хранения данных была выбрана PostgreSQL; я была уже ранее знакома с алгоритмом загрузки данных в рассматриваемую БД, хочу отметить ее надежность и стабильность ввиду ACID-совместимости, наличия встроенной системы логирования, что позволяет следить за выполняемыми транзакциями и в случае сбоев откатывать до предыдущего состояния, не теряя уже накопленный массив данных. Так как в работе выделялась проблема о наличии дубликатов при вставке в БД, описанные раннее преимущества PostgreSQL позволили выбрать именно ее. Для обработки возможного создания дубликатов используется синтаксис, предоставляемый самим PostgreSQL, `ON CONFLICT` для атомарной проверки и вставки/обновления данных в одной операции; при этом для определения дубликатов используется первичный ключ `time`. Таким образом, при конфликте по атрибуту `time` данные обновляются на новые, а не игнорируются. Как альтернативный подход по данному вопросу можно рассматривать использование документно-ориентированной базы данных MongoDB, которая больше подходит в случае приоритета горизонтального масштабирования БД.
